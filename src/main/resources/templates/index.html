<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.w3.org/1999/xhtml">

    <head>
        <meta charset="UTF-8">
        <title>李艳兴的剪切板</title>
        <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script> <!-- jquery -->
        <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> <!-- bootstrap核心js -->
        <script src="/clipboard.min.js"></script>

        <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"> <!-- bootstrap核心css -->

        <style>
            .container
            {
                margin-top: 50px;
            }

            .text-center
            {
                vertical-align: middle!important;
            }

            .form-group
            {
                width: 60%;
                /*background-color: red;*/
            }

            .form-group .input-group
            {
                width: 100%;
            }

            .form-group .input-group input
            {
                width: 100%;
            }

            form.form-inline
            {
                margin-bottom: 20px;
            }

            div.container div
            {
                /*background: red;*/
                display: flex;
                justify-content: center;
            }

            .none-ele
            {
                display: none;
            }

            pre
            {
                color: red;
            }

            input[name=contentId]
            {
                display: none;
            }
        </style>
    </head>

    <body>
        <div class="container">

            <form class="form-inline" action="/addOneContent" method="post">
                <div class="form-group">
                    <div class="input-group">
                        <input type="text" class="form-control col-md-9" id="exampleInputAmount" name="contentMaster" required/>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">添加此条内容</button>
            </form>

            <table class="table table-bordered">

                <!--表头-->
                <tr>
                    <th class="text-center">内容</th>
                    <th class="col-md-3 text-center">操作</th>
                </tr>
                <!--//表头-->

                <tr th:each="foo : ${all_content}">
                    <form action="/updateContextById" method="post">
                        <td class="text-center">
                            <!--展示-->
                            <pre name="show-content" th:id="@{'c'+${foo.contentId}}" th:text="${foo.contentMaster}"></pre>

                            <!--修改-->
                            <input name="contentId" th:value="${foo.contentId}" class="form-control text-center" readonly/>
                            <input name="contentMaster" th:id="@{'c'+${foo.contentId}}" th:value="${foo.contentMaster}" class="form-control text-center" required/>
                        </td>
                        <td class="col-md-3 text-center">
                            <!--展示-->
                            <a name="show-content" class="btn btn-success" data-clipboard-action="copy" th:data-clipboard-target="@{'#c'+${foo.contentId}}">复制</a>
                            <a name="show-content" my="update-content" class="btn btn-info">修改</a> <!-- 修改按钮 -->
                            <a name="show-content" class="btn btn-danger" th:href="@{ '/removeOneContent?id=' + ${foo.contentId} }">删除</a>

                            <!--修改-->
                            <input name="update-content" class="btn btn-info" type="submit" value="提交"/>
                            <a name="update-content" my="back" class="btn btn-info">返回</a> <!-- 返回按钮 -->
                        </td>
                    </form>
                </tr>
            </table>

        </div>

        <script>
            var clipboard = new ClipboardJS('.btn');

            // 隐藏 修改内容
            $('input[name=contentMaster]').addClass('none-ele');
            $('input[name=update-content]').addClass('none-ele');
            $('a[name=update-content]').addClass('none-ele');

            // 为修改按钮绑定事件
            // 这一行 隐藏 展示内容  显示 修改内容
            $('a[my=update-content]').click
            (
                function ()
                {
                    $(this).parent().prev().find('pre[name=show-content]').addClass('none-ele');

                    $(this).prev().addClass('none-ele');
                    $(this).addClass('none-ele');
                    $(this).next().addClass('none-ele');

                    $(this).parent().prev().find('input[name=contentMaster]').removeClass('none-ele');
                    $(this).next().next().removeClass('none-ele');
                    $(this).next().next().next().removeClass('none-ele');
                }
            );

            // 为返回按钮绑定事件
            // 这一行 显示 展示内容  隐藏 修改内容
            $('a[my=back]').click
            (
                function ()
                {
                    $(this).parent().prev().find('pre[name=show-content]').removeClass('none-ele');
                    $(this).prev().prev().removeClass('none-ele');
                    $(this).prev().prev().prev().removeClass('none-ele');
                    $(this).prev().prev().prev().prev().removeClass('none-ele');

                    $(this).parent().prev().find('input[name=contentMaster]').addClass('none-ele');
                    $(this).prev().addClass('none-ele');
                    $(this).addClass('none-ele');
                }
            );
        </script>

    </body>

</html>